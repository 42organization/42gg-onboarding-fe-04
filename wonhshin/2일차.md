---

- RDB
- RDBMS
- RDB와 NoSQL의 차이
- 테이블, 컬럼, 스키마
- 데이터 모델링
    - 데이터 정규화
- 트랜잭션
- DB의 무결성
- sql문
- DB직접 연결하기
    - datagrip으로 연동해보기
- 2일차 md로 작성

## RDB

**realational database**

---

RDB(관계형 데이터베이스)는 데이터를 테이블(table)형태로 저장하고, 테이블 간의 관계를 정의하여 데이터를 효율적으로 관리하는 데이터베이스 관리 시스템

- 구조화된 데이터 : 데이터는 행(row)과 열(column)로 구성된 테이블에 저장됨
- 스키마 기반 : 고정된 데이터 구조(스키마)를 기반으로 데이터 저장함
- SQL 사용: 데이터를 관리하고 조회하기 위해 표준 언어인 SQL(Structure Query Language)사용
- 무결성 보장: 기본키, 외래 키, 제약조건을 사용해 데이터 무결성과 일관성 유지
- 구성요소 : 테이블, 행(개별 레코드), 열(데이터 속성), 기본키, 외래키

### RDB의 장점

---

1. 데이터 무결성 보장 : 관계와 제약조건을 통해 데이터 정확성 유지
2. 표준화된 SQL : 데이터 관리와 쿼리에 강력하고 일관된 인터페이스 제공
3. 복잡한 관계 처리 가능 : 테이블 간 관계를 통해 복잡한 데이터 모델링이 가능
4. 트랜잭션 관리 : ACID 속성을 통해 안정적이고 신뢰성 있는 데이터 관리 가능
5. 분류, 정렬, 탐색 속도가 빠름

### RDB의 단점

---

- 고정된 스키마를 사용하기 때문에 데이터 구조를 사전에 정의해야함 ⇒ 데이터 형태가 자주 변경되거나 비정형 데이터(ex.json) 처리 시 비효율적임
- 대규모 데이터 처리에 한계가 있음
- 복잡한 관계 처리를 위해 JOIN연산이 사용되는데, 성능 저하를 초래함

> 이러한 이유로, NoSQL로 대체되기도 함

## RDBMS

Relational Database Management System

---

Relational Database를 관리하기 위한 소프트웨어.

데이터 베이스를 생성, 저장, 수정, 삭제, 관리하고 데이터를 효율적으로 쿼리할 수 있도록 다양한 기능 제공함

- 데이터를 테이블 형식으로 저장하고, SQL을 사용하여 데이터와 상호작용하며, 관계형 데이터 모델을 기반으로 데이터 무결성과 일관성을 유지

### 주요기능

---

1. 데이터 정의\_DDL
   - 데이터 베이스 구조와 스키마를 정의하거나 벼경
   - Create, Alter, Drop
2. 데이터 조작\_DML
   - 데이터를 삽입, 수정, 삭제, 검색하는 기능
   - Insert, Update, Delete, Select
3. 데이터 제어\_DCL
   - 데이터베이스 사용자 권한을 관리하는 기능
   - Grant, Rovoke
4. 트랜잭션 관리\_TCL
   - 데이터베이스의 일관성과 무결성을 유지하기 위한 트랜잭션 관리기능
   - Commit, Rollback, SavePoint
5. 데이터 무결성 보장
   - 제약조건을 통해 데이터의 일관성과 정확성 유지
   - primary ket, foreign key, unique, Not Null, check 등

### RDBMS의 구조

---

1. 데이터베이스
   - 데이터를 저장하는 논리적 저장소
2. 테이블
   - **데이터를 행과 열 형태로 저장**
   - 각 테이블은 고유한 이름과 스키마를 가짐
3. 행\_Row
   - 데이터의 개별 레코드
   - 하나의 행 = record, tuple
4. 열\_Column
   - 데이터의 속성(attribute) 정의
   - 하나의 열 = field, item
5. Key
   - Primary key: 각 행을 고유하게 식별
   - Foreign key: 다른 테이블과의 관계를 정의

### 대표적인 RDBMS software

---

1. 오픈소스:
   - MySQL
   - PostgreSQL
   - MariaDB
2. 상용
   - Oracle
3. 클라우드
   - Amazon
   - Google Cloude
   - Azure SQL database

## NoSQL과 RDB

---

NoSQL

- 비관계형 데이터 모델 사용, 키-값, 문서, 그래프 등 다양한 데이터 모델을 사용하는 데이터베이스 시스템

|             | RDB                        | NoSQL                |
| ----------- | -------------------------- | -------------------- |
| 데이터 구조 | 관계형 데이터 모델         | 비관계형 데이터 모델 |
| 확장성      | 수직 확장                  | 수평 확장            |
| 일관성      | 보장                       | 모델에 따라 제어     |
| 유연성      | 변경이 어려움              | 변경 쉬움            |
| RDBMS       | mySQL, Postgre SQL, Oracle | Mongo, Redis         |

차이점 : RDB는 관계를 중심으로 데이터를 저장하고 분석하는데 사용되며, NoSQL은 대규모 및 분산 환경에서 확장성을 위해 설계되어 다양한 데이터 모델을 사용함

## E-R(Entity-Relationship) Model

개체-관계 모델이란, 구조화된 데이터에 대한 일련의 표현이다.

---

- ER모델은 데이터베이스 설계의 초기 단계에서 데이터 구조를 시각적으로 표현하는데 사용되며, 설계된 ER모델은 RDBMS의 스키마로 구현됨
- ER모델의 엔터티 속성, 관계는 각각 테이블, 열, 외래키로 변환됨

      ## 스키마

      ---

      데이터베이스의 구조와 제약조건에 관해 전반적인 명세를 기술한 구조적 설계도(청사진)

      → DB내에 어떤 구조로 데이터가 저장되어있는 지를 나타내는 데이터베이스 구조

      ### 스키마의 구성요소

      ---

      1. 테이블
          - 데이터를 저장하는 기본단위, 행과 열로 구성
      2. 열
          - 데이터 속성 정의
      3. 개체
          - 속성의 집합
      4. 제약조건
          - 데이터의 무결성과 일관성을 보장하기 위해 설정
          - Primary Key : 각 행을 고유하게 식별
          - Foreign Key : 다른 테이블과의 관계를 정의
          - Not Null : 특정 열이 NULL값을 가질 수 없음
          - Unique : 특정 열의 값이 고유해야함
      5. 인덱스
          - 데이터 검색 속도 향상
      6. 관계
          - 테이블 간의 연결을 정의 예) 1:1, 1:N, N:M 관계

      ### 개념스키마, 내부스키마, 물리스키마, 외부스키마

      ---

  ![](https://velog.velcdn.com/images/wondi/post/ba514e94-294b-4c44-84e8-5c1dda42a8ae/image.png)
  ![](https://velog.velcdn.com/images/wondi/post/b8f77175-fa9d-4db0-a2e6-39a8c357f09c/image.png)

      - 외부 스키마 = 서브 스키마 - 사용자 뷰

      ## 테이블, 행, 열

      ---

      테이블:

      - 데이터를 행과 열로 구성된 2차원 구조로 저장하는 데이터베이스의 기본 단위

      컬럼:

      - 데이터의 속성을 정의함.
      - 하나의 컬럼은 특정 데이터 타입을 가지며, 모든 행에서 동일한 의미와 타입을 가짐

      행:

      - 고유한 데이터를 나타내며, Primary Key를 통해 고유하게 식별됨

## 데이터 모델링

: 문제를 현실로 붙어 뜯어내 고도의 추상화를 거쳐, 컴퓨터에 작성하는 것

---

개념적 데이터 모델링 ⇒ 논리적 데이터 모델링 ⇒ 물리적 데이터 모델링

### 개념적 데이터 모델링

---

E-R 다이어그램 구성

- 파악한 업무에서 개념을 뽑는 과정

![](https://velog.velcdn.com/images/wondi/post/72b3e7ea-bde6-4772-b7f9-cea408eac37e/image.png)

**ERD로 얻을 수 있는 것 : 정보, 정보그룹, 관계**

- Entity = 테이블로 전환
- 글 → 본문, 제목, 생성일 ⇒ Attribute(=column)
- entity들간의 관계 Pk, Fk, Join

- Identifier가 없다면, 일련번호를 따로 만들면 됨

```c
Employees
+-------------+
| 직원 ID (PK)|
| 이름        |
| 직책        |
| 급여        |
| 부서 ID (FK)|
+-------------+
      |
      | 1:N
      |
Departments
+-------------+
| 부서 ID (PK)|
| 부서 이름    |
| 위치        |
+-------------+
```

### Relationship

---

- Cardinality **`기수`**
- 데이터 집합에서의 카디널리티
  - 특정 데이터 집합의 유니크한 값의 개수
  - 데이터 집합의 중복도가 낮으면 카디널리티가 높고, 중복도가 높으면 카디널리티가 낮다.
  - 예)성별-남,여 cardinality 2개
    - 주민등록번호: 데이터 개수와 동일
- **관계형 데이터베이스에서 카디널리티**

  - 두 테이블 간의 관계에서 하나의 엔터티가 다른 엔터티와 연결될 수 있는 횟수를 나타냄
  - 일대일, 일대다, 다대다 관계

- Optionality

### 논리적 데이터 모델링

---

생각했던 개념을 표로 전환하는 작업/ 논리적인 데이터 구조 설계함

- 성능고려x

매핑 룰: ERD를 통해 표현한 내용을 관계형 데이터 베이스에 맞는 형식으로 전환할 때 사용하는 방법론

- N:M
  - mapping 테이블이 필요함

![](https://velog.velcdn.com/images/wondi/post/d9cad3a9-3dac-4c7d-ab04-198318c1306e/image.png)

### 정규화

---

- 정제되어있지 않은 데이터를 관계데이터의 표로 만들어주는 형식

데이터 ⇒ 1정규형1NF ⇒ 2정규형2NF ⇒ 3정규3NF

### 제1정규화

---

- 도메인이 원자값 Atomic domain

![](https://velog.velcdn.com/images/wondi/post/f87553ab-f65a-425d-afb9-ab57e08c18f3/image.png)

### 제2정규화

---

- 부분함수 종속성 제거

![](https://velog.velcdn.com/images/wondi/post/129ee23e-877a-4386-b5ad-32a1fecb3302/image.png)

### 제3정규화

---

- 이행적함수 종속성 제거
- 데이터 중복 최소화, 데이터 무결성 유지

![](https://velog.velcdn.com/images/wondi/post/68237673-5f0c-400e-a081-2e8540eacaf8/image.png)

A→B→C 면 A→C X

1. 직원 데이터를 관리하는 테이블

```c
Employees
+------------+-----------+-------------+------------+
| EmployeeID | Name      | Department  | DeptPhone  |
+------------+-----------+-------------+------------+
| 1          | Alice     | HR          | 123-4567   |
| 2          | Bob       | IT          | 987-6543   |
| 3          | Charlie   | HR          | 123-4567   |
+------------+-----------+-------------+------------+
```

- Department와 DeptPhone에 이행적 종속이 있음

2.

```c
직원 테이블(Employees):
+------------+-----------+-------------+
| EmployeeID | Name      | Department  |
+------------+-----------+-------------+
| 1          | Alice     | HR          |
| 2          | Bob       | IT          |
| 3          | Charlie   | HR          |
+------------+-----------+-------------+

부서 테이블(Departments):
+-------------+------------+
| Department  | DeptPhone  |
+-------------+------------+
| HR          | 123-4567   |
| IT          | 987-6543   |
+-------------+------------+
```

### 물리적 데이터 모델링

---

코드 작성 ⇒ SQL 작성

- **성능향상**이 제일 중요함
  - index : 읽기 성능 ⬆️ , 쓰기 성능 ⬇️
  - application : 캐싱 ⇒ 데이터베이스 부하 ⬇️
- ⭐️쿼리의 병목이 생기는 지 확인하는 것이 중요!⭐️
- **역정규화, 반정규화**

### 역정규화

: denormalization

---

정규화 → Join을 하면 읽기 성능이 내려감

1. Join을 줄이기
   - 중복을 허용함
2. 컬럼을 조작하여 계산을 줄임
   - group by ⇒ 비싼 작업
   - 자주쓰는 것이라면, 데이터를 추가하는 방법도 있음
3. 표를 쪼개기
   - 컬럼을 기준으로 테이블을 분리 ⇒ 샤딩
   - 행을 기준으로 테이블을 분리 ⇒ 사용자가 많다면, 1~1000/ 1001~2000 까지 나누면서 쓸 수 있음
4. 관계의 역정규화
   - FK를 사용해서 다른 표와 결합함

## 트랜잭션

---

데이터베이스의 상태를 변환시키는 하나의 논리적인 기능을 수행하기 위한 작업의 단위 or 일련의 연산

- Select, Insert, Delete, Udate를 통해 데이터베이스에 접근하는 것

### 트랜잭션의 특징

---

1. 원자성 Atomicity

   트랜잭션이 데이터베이스에 모두 반영되거나, 전혀 반영되지 않아야 함

2. 일관성 Consistency

   처음 참조작업한 데이터베이스로 진행됨

3. 독립성 Isolation

   트랜잭션이 실행될 때 다른 트랜잭션이 연산에 끼어들 수 없다

4. 영속성(지속성) Durability

   트랜잭션이 성공적으로 완료됐을 때, 결과는 영구적으로 반영되어야 함

![](https://velog.velcdn.com/images/wondi/post/a0029e47-0a3a-446d-a1fa-050c64f58550/image.png)

Commit

- 모든 작업들을 정상 처리하겠다고 확정하는 명령어.
- 해당 과정을 DB에 영구 저장하겠다는 의미, Commit이 수행되면 하나의 트랜잭션 과정이 종료됨

Roll-back

- 작업 중 문제 발생으로 트랜잭션의 처리과정에서 발생한 변경사항을 취소하는 명령어. 예전 상태로 복구함

## 데이터베이스의 무결성

Data Integrity

---

무결성은 데이터베이스에 저장된 데이터의 정확성, 일관성, 신뢰성을 보장하는 개념

데이터가 규칙과 제약조건을 충족하고, 데이터가 손상되지 않고 정확히 저장, 관리되도록 보장하는 것을 의미함

### 무결성의 목적

---

1. 데이터의 정확성 유지
2. 데이터의 일관성 보장
3. 데이터의 신뢰성 확보

### 무결성의 유형

---

1. 개체 무결성
2. 참조 무결성
3. 도메인 무결성\_특정 값이특정 도메인을 충족해야함
4. 키 무결성
5. 비즈니스 무결성

![](https://velog.velcdn.com/images/wondi/post/11ef4fb6-10de-480a-bac5-1417b476273f/image.png)

### 무결성 유지 방법

---

1. 제약조건
2. 트랜잭션
3. 정규화
4. 백업, 복구

### 무결성이 깨질 경우 생기는 문제

---

1. 데이터 중복
2. 삽입이상
3. 삭제이상
4. 갱신이상

## SQL

---

| 분류        | 주요 명령어                                                        | 사용예시                          |
| ----------- | ------------------------------------------------------------------ | --------------------------------- |
| DDL         | CREATE, ALTER, DROP, TRUNCATE                                      | 테이블 및 데이터베이스 구조 정의. |
| DML         | SELECT, INSERT, UPDATE, DELETE                                     | 데이터 삽입, 수정, 삭제 및 조회.  |
| DCL         | GRANT, REVOKE                                                      | 권한 부여 및 철회.                |
| TCL         | COMMIT, ROLLBACK, SAVEPOINT                                        | 트랜잭션 관리.                    |
| Constraints | PRIMARY KEY, FOREIGN KEY, NOT NULL, UNIQUE, CHECK, DEFAULT         | 데이터 무결성을 보장.             |
| 연산/ 함수  | SELECT, GROUP BY, ORDER BY, 집계 함수(SUM, AVG, MAX, MIN 등), JOIN | 데이터 조회 및 조작.              |

```c
조회시
SELECT 컬럼명, 집계함수 as 별명
FROM 테이블명
WHERE 테이블 조건
GROUP BY 컬럼명
HAVING 그룹 조건
ORDER BY 컬럼명
```
